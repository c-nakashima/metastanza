{"version":3,"file":"dev-overview-dev4.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/dev-overview-dev4/index.js"],"sourcesContent":["import * as d3 from \"d3\";\nimport { getFormatedJson } from \"@/lib/metastanza_utils.js\";\nimport mapValues from \"lodash.mapvalues\";\n\nexport default async function devOverviewDev3(stanza, params) {\n  stanza.render({\n    template: \"stanza.html.hbs\",\n    parameters: {},\n  });\n\n  const apis = JSON.parse(params.apis);\n\n  draw(stanza.root.querySelector(\"#chart\"), apis);\n}\n\nasync function draw(element, apis) {\n  const labelMargin = 100;\n  const width = 700;\n  const height = 50;\n\n  const dataset = {};\n  for (const api of apis) {\n    dataset[api] = await getFormatedJson(api, element);\n  }\n\n  let body = {};\n\n  for (let id = 0; id < apis.length; id++) {\n    const api = apis[id];\n    // first render\n    const div = d3\n      .select(element)\n      .append(\"div\")\n      .attr(\"id\", \"div_\" + id)\n      .attr(\"class\", \"bar\");\n    const svg = div\n      .append(\"svg\")\n      .attr(\"width\", width + labelMargin)\n      .attr(\"height\", height);\n    svg\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", height / 2)\n      .attr(\"alignment-baseline\", \"central\")\n      .text(\n        dataset[api].type.charAt(0).toUpperCase() + dataset[api].type.slice(1)\n      );\n\n    [dataset[api].data, dataset[api].total] = setData(\n      dataset[api].data,\n      width,\n      height,\n      labelMargin\n    );\n    dataset[api].id = id;\n\n    svg.attr(\"id\", \"svg_\" + dataset[api].type.replace(/\\s/g, \"_\"));\n\n    // bar group\n    const bar_g = svg\n      .selectAll(\".bar-g\")\n      .data(dataset[api].data)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"bar-g\")\n      .on(\"mouseover\", function (e, d) {\n        svg\n          .append(\"text\")\n          .attr(\"id\", d.onclick_list[0].id)\n          .text(d.label + \": \" + d.count + \"/\" + d.origCount)\n          .attr(\"x\", function () {\n            const x = d.barStart + d.barWidth / 2;\n            const left = x - this.getBBox().width / 2;\n            const right = x + this.getBBox().width / 2;\n            if (left > labelMargin + 10 && right < labelMargin + width - 10) {\n              d.textAnchor = \"middle\";\n              return x;\n            } else if (left < labelMargin + 10) {\n              d.textAnchor = \"start\";\n              return labelMargin + 10;\n            }\n            d.textAnchor = \"end\";\n            return labelMargin + width - 10;\n          })\n          .attr(\"y\", height / 2)\n          .attr(\"text-anchor\", d.textAnchor)\n          .attr(\"dominant-baseline\", \"central\");\n      })\n      .on(\"mouseout\", function (e, d) {\n        svg.select(\"text#\" + d.onclick_list[0].id).remove();\n      })\n      .on(\"click\", async function (e, d) {\n        // re-render\n        const key = dataset[api].type.replace(/\\s/g, \"_\");\n        const value = d.onclick_list[0].id;\n        if (\n          d3\n            .select(e.currentTarget)\n            .select(\"#selected-sign-\" + d.onclick_list[0].id)\n            .style(\"display\") === \"none\"\n        ) {\n          if (body[key]) {\n            body[key].push(value);\n          } else {\n            body[key] = [value];\n          }\n          for (const api of apis) {\n            getDataAndRender(element, api, body, dataset);\n          }\n          d3.select(e.currentTarget)\n            .select(\"#selected-sign-\" + d.onclick_list[0].id)\n            .style(\"display\", \"block\");\n        } else {\n          if (body[key].length === 1) {\n            delete body[key];\n          } else {\n            for (let i = 0; i < body[key].length; i++) {\n              if (body[key][i] === value) {\n                body[key].splice(i, 1);\n                break;\n              }\n            }\n          }\n          for (const api of apis) {\n            getDataAndRender(element, api, body, dataset);\n          }\n          d3.select(e.currentTarget)\n            .select(\"#selected-sign-\" + d.onclick_list[0].id)\n            .style(\"display\", \"none\");\n        }\n      });\n\n    // bg bar\n    bar_g\n      .append(\"rect\")\n      .attr(\"class\", \"na-bar\")\n      .attr(\"x\", function (d) {\n        return d.barStart;\n      })\n      .attr(\"y\", 0)\n      .attr(\"width\", function (d) {\n        return d.barWidth;\n      })\n      .attr(\"height\", height);\n\n    // ratio bar\n    bar_g\n      .append(\"rect\")\n      .attr(\"x\", function (d) {\n        return d.barStart;\n      })\n      .attr(\"y\", 0)\n      .attr(\"width\", function (d) {\n        return d.barWidth;\n      })\n      .attr(\"height\", height)\n      .attr(\"id\", function (d) {\n        return d.onclick_list[0].id;\n      })\n      .attr(\"class\", function (d) {\n        if (d.label !== \"None\") {\n          return \"target-bar\";\n        }\n        return \"bar-style-na\";\n      })\n      .attr(\"fill\", function (d) {\n        return d.color;\n      });\n\n    // selected sign\n    bar_g\n      .append(\"rect\")\n      .attr(\"x\", function (d) {\n        return d.barStart;\n      })\n      .attr(\"y\", height - 10)\n      .attr(\"width\", function (d) {\n        return d.barWidth;\n      })\n      .attr(\"height\", 10)\n      .attr(\"id\", function (d) {\n        return \"selected-sign-\" + d.onclick_list[0].id;\n      })\n      .attr(\"class\", \"selected-sign\");\n  }\n\n  const initDataset = JSON.parse(JSON.stringify(dataset));\n  d3.select(element)\n    .append(\"p\")\n    .html(\"&gt; Reset\")\n    .style(\"cursor\", \"pointer\")\n    .on(\"click\", function () {\n      // reset-render\n      body = {};\n\n      for (const api of apis) {\n        dataset[api].data = changeData(\n          dataset[api],\n          JSON.parse(JSON.stringify(initDataset[api].data)),\n          width,\n          height,\n          labelMargin\n        );\n        reRender(element, dataset[api]);\n      }\n\n      d3.select(element)\n        .selectAll(\"rect.selected-sign\")\n        .style(\"display\", \"none\");\n    });\n\n  async function getDataAndRender(element, api, body, dataset) {\n    const newData = await getFormatedJson(\n      api,\n      element.querySelector(\"#div_\" + dataset[api].id),\n      mapValues(body, (v) => v.join(\",\"))\n    );\n    dataset[api].data = changeData(\n      dataset[api],\n      newData.data,\n      width,\n      height,\n      labelMargin\n    );\n    reRender(element, dataset[api]);\n  }\n\n  function reRender(element, dataset) {\n    const svg = d3\n      .select(element)\n      .select(\"#svg_\" + dataset.type.replace(/\\s/g, \"_\"));\n    svg\n      .selectAll(\".target-bar\")\n      .data(dataset.data)\n      .transition()\n      .delay(200)\n      .duration(1000)\n      // .attr(\"x\", function(d){ return d.barStart })\n      // .attr(\"width\", function(d){ return d.targetBarWidth })\n      .filter(function (d) {\n        return d.color;\n      })\n      .attr(\"fill\", function (d) {\n        return d.color;\n      });\n  }\n\n  function setData(data, width, height, labelMargin) {\n    let total = 0;\n    for (const category of data) {\n      total += parseFloat(category.count);\n    }\n\n    let start = labelMargin;\n    for (let i = 0; i < data.length; i++) {\n      let barWidth = (width * parseFloat(data[i].count)) / total;\n      if (data.length - 1 === i) {\n        barWidth = width - start + labelMargin;\n      }\n      data[i].origCount = data[i].count;\n      data[i].barStart = start;\n      data[i].barWidth = barWidth;\n      data[i].targetBarWidth = 0;\n      data[i].color = \"#ff8800\";\n      start += barWidth;\n    }\n    data.push({\n      label: \"None\",\n      count: \"0\",\n      barStart: width + labelMargin,\n      barWidth: 0,\n      onclick_list: [{ id: \"n-a\" }],\n    });\n    return [data, total];\n  }\n\n  function changeData(dataset, newData, width, height, labelMargin) {\n    const data = dataset.data;\n    const label2data = {};\n    if (!newData[0]) {\n      newData = [\n        {\n          label: \"None\",\n          count: \"1\",\n          onclick_list: [{ id: \"n-a\" }],\n        },\n      ];\n    }\n    for (const category of newData) {\n      label2data[category.label] = category;\n    }\n    let start = labelMargin;\n    for (let i = 0; i < data.length; i++) {\n      if (label2data[data[i].label]) {\n        data[i].count = label2data[data[i].label].count;\n      } else {\n        data[i].count = 0;\n      }\n      let targetBarWidth = (width * parseFloat(data[i].count)) / dataset.total;\n      if (data.length - 1 === i) {\n        targetBarWidth = width - start + labelMargin;\n      }\n      data[i].targetBarWidth = targetBarWidth;\n      start += targetBarWidth;\n      // color\n      const delta = Math.floor((data[i].count / data[i].origCount) * 127);\n      if (delta) {\n        let g = (256 - delta).toString(16);\n        let b = (128 - delta).toString(16);\n        if (g.length === 1) {\n          g = \"0\" + g;\n        }\n        if (b.length === 1) {\n          b = \"0\" + b;\n        }\n        data[i].color = \"#ff\" + g + b;\n      } else {\n        data[i].color = \"#dddddd\";\n      }\n    }\n    return data;\n  }\n}\n"],"names":["d3\n      .select","d3\n            .select","d3.select","mapValues"],"mappings":"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"}