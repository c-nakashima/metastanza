{"version":3,"file":"vega_scatterplot.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/vega_scatterplot/index.js"],"sourcesContent":["import vegaEmbed from \"vega-embed\";\n\nexport default async function vegaScatterplot(stanza, params) {\n  let spec = await fetch(params[\"src-url\"]).then((res) => res.json());\n  spec.data[0].url = params[\"your-data\"]\n\n  //stanza（描画範囲）のwidth・height\n  spec.width = params[\"width\"]; \n  spec.height = params[\"height\"];\n  \n  //stanzaのpadding\n  spec.padding = params[\"padding\"];\n\n  //スケールに関する設定\n  spec.scales[0].paddingInner = params[\"padding-inner\"]\n  spec.scales[0].paddingOuter = params[\"padding-outer\"]\n\n  //軸に関する設定\n  spec.axes =[\n    {\n      \"scale\": \"x\",\n      \"grid\": params[\"xgrid\"],\n      \"domain\": false,\n      \"orient\": params[\"orient-of-xscale\"],\n      \"tickCount\": 5,\n      \"title\": params[\"title-of-xaxis\"],\n      \"encode\": {\n          \"ticks\": {\n            \"update\": {\n            \"stroke\": {\"value\": \"var(--tick-color)\"}\n            }\n          },\n          \"labels\": {\n            \"interactive\": true,\n            \"update\": {\n              \"fill\": {\"value\": \"var(--label-color)\"},\n              \"fontSize\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--label-size\")}\n            },\n            \"hover\": {\n              \"fill\": {\"value\": \"var(--emphasized-color)\"}\n            }\n          },\n          \"title\": {\n            \"update\": {\n              \"fontSize\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--title-size\")}\n            }\n          },\n          \"domain\": {\n            \"update\": {\n              \"stroke\": {\"value\": \"var(--axis-color)\"},\n              \"strokeWidth\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--axis-width\")}\n            }\n          }\n        }\n    },\n    {\n      \"scale\": \"y\",\n      \"grid\": params[\"ygrid\"],\n      \"domain\": false,\n      \"orient\": params[\"orient-of-yscale\"],\n      \"titlePadding\": 5,\n      \"title\": params[\"title-of-yaxis\"],\n      \"encode\": {\n        \"ticks\": {\n          \"update\": {\n          \"stroke\": {\"value\": \"var(--tick-color)\"}\n          }\n        },\n        \"labels\": {\n          \"interactive\": true,\n          \"update\": {\n            \"fill\": {\"value\": \"var(--label-color)\"},\n            \"fontSize\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--label-size\")}\n          },\n          \"hover\": {\n            \"fill\": {\"value\": \"var(--emphasized-color)\"}\n          }\n        },\n        \"title\": {\n          \"update\": {\n            \"fontSize\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--title-size\")}\n          }\n        },\n        \"domain\": {\n          \"update\": {\n            \"stroke\": {\"value\": \"var(--axis-color)\"},\n            \"strokeWidth\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--axis-width\")}\n          }\n        }\n      }\n    }\n  ]\n\n  spec.legends = [\n    {\n      \"size\": \"size\",\n      \"title\": params[\"title-of-legend\"],\n      \"format\": \"s\",\n      \"symbolStrokeColor\": \"var(--stroke-color)\",\n      \"symbolStrokeWidth\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--stroke-width\")},\n      \"symbolOpacity\": getComputedStyle(stanza.root.host).getPropertyValue(\"--opacity\"),\n      \"symbolType\": params[\"symbol-type\"],\n      \"symbolFillColor\": {\"value\": \"var(--basic-fill-color)\"}\n    }\n  ]\n\n  spec.marks= [\n    {\n    \"name\": \"marks\",\n    \"type\": \"symbol\",\n    \"from\": {\"data\": \"source\"},\n    \"encode\": {\n      \"update\": {\n        \"x\": {\"scale\": \"x\", \"field\": \"Horsepower\"},\n        \"y\": {\"scale\": \"y\", \"field\": \"Miles_per_Gallon\"},\n        \"size\": {\"scale\": \"size\", \"field\": \"Acceleration\"},\n        \"shape\": {\"value\": params[\"symbol-type\"]},\n        \"strokeWidth\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--stroke-width\")},\n        \"opacity\": {\"value\": getComputedStyle(stanza.root.host).getPropertyValue(\"--opacity\")},\n        \"stroke\": {\"value\": \"var(--stroke-color)\"},\n        \"fill\": {\"value\": \"var(--basic-fill-color)\"}\n      },\n      \"hover\": {\n        \"fill\": {\"value\": \"var(--emphasized-color)\"},\n      }\n      }\n    }\n  ]\n\n  const el = stanza.root.querySelector(\"main\");\n  const opts = {\n    renderer: \"svg\"\n  };\n  await vegaEmbed(el, spec, opts);\n}"],"names":["vegaEmbed"],"mappings":"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"}